<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Modal Window</title>
</head>
<script>
    /*
 * In the popup's scripts, running on <http://example.com>:
 */

// Called sometime after postMessage is called
// function receiveMessage(event)
// {
//   // Do we trust the sender of this message?
//   if (event.origin !== "http://localhost")
//     return;

//   // event.source is window.opener
//   // event.data is "hello there!"

//   // Assuming you've verified the origin of the received message (which
//   // you must do in any case), a convenient idiom for replying to a
//   // message is to call postMessage on event.source and provide
//   // event.origin as the targetOrigin.
//   event.source.postMessage("hi there yourself!  the secret response " +
//                            "is: rheeeeet!",
//                            event.origin);
// }

// window.addEventListener("message", receiveMessage, false);

function sendMessage(event) {
    console.log("attempting to send message to parent");
    if (window.opener) {
        window.opener.postMessage("Test!","*");
    }
    else {
        window.parent.postMessage("Test from modal!", "*");
    }
}

</script>
<body>
    Child window!
    <div id="cta">CTA</div>
</body>
<script>
    document.getElementById("cta").addEventListener("click",sendMessage,false);
</script>
</html>